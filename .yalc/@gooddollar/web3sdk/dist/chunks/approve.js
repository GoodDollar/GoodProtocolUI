import{H as e,I as r,G as s,X as t,Y as a,n,S as o}from"./tokens.js";import{E as u,d as c,g as i}from"./errors.js";import{a as p,b as l}from"./FuseUniswapContract.js";import{p as m}from"./prepareValues.js";function d(d,f,h){return e(this,void 0,void 0,(function(){var e,v,b,g,j,x,y,E;return r(this,(function(r){switch(r.label){case 0:return[4,i(d)];case 1:return e=r.sent(),v="buy"===h?p:l,f.trade&&f.trade.inputAmount.currency.isNative?(console.log("approve isNative"),[2]):[3,2];case 2:return e!==o.FUSE?[3,4]:[4,v(d,f.trade)];case 3:return r.sent(),[3,8];case 4:return[4,c(d)];case 5:return b=r.sent(),g=m(f).input,j=a.from(g),x="buy"===h?f.route[0].address:n[e].address,[4,(y=u(d,x)).methods.allowance(b,s(e,"ExchangeHelper")).call().then((function(e){return a.from(e)}))];case 6:return E=r.sent(),j.lte(E)?[2]:[4,y.methods.approve(s(e,"ExchangeHelper"),t.toString()).send({from:b,type:"0x2"})];case 7:r.sent(),r.label=8;case 8:return[2]}}))}))}export{d as a};
